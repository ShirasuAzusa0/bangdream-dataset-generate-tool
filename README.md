# Bang Dream! Dataset generator

## ğŸ˜‹ç®€ä»‹
æœ¬é¡¹ç›®æ˜¯ä¸€å¥—é€‚ç”¨äºå¤„ç†ã€ŠBanG Dream!ã€‹ç›¸å…³å‰§æƒ…æ–‡ä»¶æ„å»ºæ•°æ®é›†ï¼Œç”¨äºè¿›è¡Œ LLM å¾®è°ƒä¸è®­ç»ƒçš„è‡ªåŠ¨åŒ–è„šæœ¬

## ğŸ“é¡¹ç›®ç»“æ„
1. **æ•°æ®æ”¶é›†**
2. **æ•°æ®å¤„ç†**
3. **æ•°æ®å­˜å‚¨**

## ğŸ”‘ä½¿ç”¨è¯´æ˜
### ğŸ§°å¯æ”¹é…ç½®é¡¹
æ¯ä¸ªè„šæœ¬æ–‡ä»¶ä¸­éƒ½æœ‰é›†ä¸­çš„é…ç½®åŒºï¼Œæ ¹æ®æ³¨é‡ŠæŒ‰éœ€è¿›è¡Œä¿®æ”¹å³å¯

æ¯ä¸ªè„šæœ¬æ–‡ä»¶ä¸‹è½½æˆ–å¤„ç†å¾—åˆ°çš„æ–‡ä»¶å­˜å‚¨çš„è·¯å¾„å¯ä»¥è‡ªå®šä¹‰ä¿®æ”¹ï¼Œä¸‹é¢çš„æ•°æ®ä¸‹è½½å¤„ç†æ•™ç¨‹ä½¿ç”¨çš„æ˜¯é»˜è®¤è®¾ç½®ï¼Œä½¿ç”¨è€…å¯æŒ‰éœ€è°ƒæ•´

### â¬‡ï¸æ•°æ®æ”¶é›†
è¿è¡Œ`downloader.py`ä¸‹è½½é‚¦é‚¦çš„å‰§æƒ…æ–‡ä»¶åˆ°`/Downloaded_Stories`è·¯å¾„ä¸‹ï¼Œä¹Ÿå¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€è¦ä¸‹è½½ä¸åŒçš„å‰§æƒ…æ–‡ä»¶ï¼Œå…·ä½“é€‰æ‹©å·²é€šè¿‡æ³¨é‡Šç»™å‡ºï¼Œé»˜è®¤æ¡ä»¶ä¸‹ä¸‹è½½ä¸»çº¿å‰§æƒ…æ–‡ä»¶

### ğŸ“„æ•°æ®å¤„ç†
è¿è¡Œ`copyer.py`æå–`/Downloaded_Stories`è·¯å¾„ä¸‹çš„`*.asset`æ–‡ä»¶åˆ°`/assets`ä¸­ï¼Œæ–¹ä¾¿åé¢çš„æ•°æ®å¤„ç†

è¿è¡Œ`to_dialogs.py`å°†`/assets`ä¸­çš„`*.asset`æ–‡ä»¶è½¬åŒ–æˆå¯¹è¯æ–‡æœ¬å½¢å¼å¹¶ä¿å­˜åˆ°`/dialogs`è·¯å¾„ä¸‹ï¼Œæ ¼å¼æ ·ä¾‹å¦‚ä¸‹ï¼š
``` 
ç¯: ã€Œå•Šâ€¦â€¦ã€
çˆ½ä¸–:ã€Œå°ç¥¥ï¼
å¤ªå¥½äº†~ä½ æ¥äº†ï¼ã€
ç¦ãƒ»ç«‹å¸Œ: ã€Œâ€¦â€¦â€¦â€¦ã€
çˆ½ä¸–: ã€Œæˆ‘ä»¬ä¸€ç›´éƒ½å¾ˆæ‹…å¿ƒä½ å“¦ã€‚
ä¸ä»…å­¦æ ¡é‚£è¾¹è¯·å‡ï¼Œè¿˜å®Œå…¨ä¸å›æ¶ˆæ¯â€”â€”ã€
ç¥¥å­: ã€Œä»Šå¤©æˆ‘æ˜¯æœ‰è¯è¦è¯´æ‰æ¥çš„ã€
ç¥¥å­: ã€Œâ€¦â€¦æˆ‘è¦é€€å‡ºCRYCHICã€
```

è¿è¡Œ`replace_text.py`æ›¿æ¢å¯¹è¯æ–‡ä»¶`*.txt`ä¸­çš„ç‰¹æ®Šå­—ç¬¦ï¼Œæ›¿æ¢è§„åˆ™å¯æŒ‰éœ€è‡ªå®šä¹‰å¢åŠ ï¼Œé»˜è®¤æ¡ä»¶ä¸‹åªå¤„ç†"ã€Œ"å’Œ"ã€"è¿™ä¿©ç‰¹æ®Šç¬¦å·ï¼Œå¤„ç†åé»˜è®¤ä¿å­˜åˆ°`/replaced_dialogs`è·¯å¾„ä¸‹ï¼Œå¤„ç†åçš„æ ¼å¼å¦‚ä¸‹ï¼š
``` 
ç¯: å•Šâ€¦â€¦
çˆ½ä¸–: å°ç¥¥ï¼å¤ªå¥½äº†~ä½ æ¥äº†ï¼
ç¦ãƒ»ç«‹å¸Œ: â€¦â€¦â€¦â€¦
çˆ½ä¸–: æˆ‘ä»¬ä¸€ç›´éƒ½å¾ˆæ‹…å¿ƒä½ å“¦ã€‚ä¸ä»…å­¦æ ¡é‚£è¾¹è¯·å‡ï¼Œè¿˜å®Œå…¨ä¸å›æ¶ˆæ¯â€”â€”
ç¥¥å­: ä»Šå¤©æˆ‘æ˜¯æœ‰è¯è¦è¯´æ‰æ¥çš„
ç¥¥å­: â€¦â€¦æˆ‘è¦é€€å‡ºCRYCHIC
```

è¿è¡Œ`delete_unrelated.py`ä»`/replaced_dialogs`ä¸­æå–å‡ºåŒ…å«æŒ‡å®šè§’è‰²ï¼ˆé€šè¿‡KEYWORDé…ç½®é¡¹è®¾å®šï¼Œéœ€è¦å“ªä¸ªè§’è‰²å°±å†™å“ªä¸ªè§’è‰²çš„åå­—ï¼‰çš„å¯¹è¯æ–‡ä»¶`*.txt`ï¼Œä¿å­˜åˆ°`related_dialogs`è·¯å¾„ä¸‹ï¼Œé™ä½åç»­è°ƒç”¨å¤§æ¨¡å‹å¤„ç†æ–‡æœ¬çš„æˆæœ¬

è¿è¡Œ`filter_dialogs.py`ï¼Œä½¿ç”¨ LLM ç­›é€‰ç›®æ ‡è§’è‰²åœ¨åœºçš„å¯¹è¯ç‰‡æ®µï¼Œå¤„ç†å¾—åˆ°çš„æ–‡ä»¶ç»Ÿä¸€æ”¾åˆ°`/filtered_dialogs`è·¯å¾„ä¸‹ï¼Œæ ¼å¼å’Œ`/replaced_dialogs`ä¸‹çš„ç±»ä¼¼ï¼Œä½†æ˜¯åªä¿ç•™äº†æŒ‡å®šè§’è‰²ç™»åœºçš„éƒ¨åˆ†

è¿è¡Œ`to_jsonl.py`ï¼Œéå†`/filtered_dialogs`å†…çš„`*.txt`æ–‡ä»¶ï¼Œè½¬åŒ–ä¸º shareGPT æ ¼å¼ï¼Œå®Œæˆè®­ç»ƒæ•°æ®é›†çš„æ„å»ºï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
```json
   {
     "messages": [
       {"role": "system", "content": "çˆ±éŸ³æ˜¯...ä½ æ˜¯è§’è‰²çˆ±éŸ³..."},
       {"role": "user", "content": "ç«‹å¸Œ: ..."},
       {"role": "assistant", "content": "çˆ±éŸ³: ..."}
     ]
   }
```

## ğŸ“‚è„šæœ¬æ–‡ä»¶åˆ—è¡¨
| è„šæœ¬å                   | åŠŸèƒ½ç®€è¿°           |
|-----------------------| -------------- |
| `downloader.py`       | æ‰¹é‡ä¸‹è½½å‰§æƒ…`.asset`æ–‡ä»¶ |
| `copyer.py`           | æ•´ç†å¹¶ç»Ÿä¸€æ”¶é›†æ‰€æœ‰`.asset`æ–‡ä»¶ |
| `to_dialogs.py`       | å°†`.asset`æ–‡ä»¶è½¬ä¸ºæ–‡æœ¬å¯¹è¯æ ¼å¼ |
| `replace_texts.py`    | å»é™¤ç‰¹æ®Šå­—ç¬¦         |
| `delete_unrelated.py` | åˆ é™¤ä¸ç›®æ ‡è§’è‰²æ— å…³çš„å¯¹è¯æ–‡æœ¬ |
| `filter_dialogs.py`   | ä½¿ç”¨ LLM ç­›é€‰ç›®æ ‡è§’è‰²åœ¨åœºçš„å¯¹è¯ç‰‡æ®µ |
| `to_jsonl.py`         | ç”Ÿæˆ ShareGPT æ ¼å¼çš„è®­ç»ƒæ•°æ®é›† |

## â—æ³¨æ„äº‹é¡¹
* è‹¥å‘ç°æŸäº›å‰§æƒ…æœ‰é”™æ¼ï¼Œå¯èƒ½æºäºåŸå§‹æ¥æºä¸ä¸€è‡´
* è‹¥å‘ç°æœ¬é¡¹ç›®å­˜åœ¨bugè¯·é€šè¿‡ issue å‘ŠçŸ¥ï¼Œæˆ‘ä¼šå°½å¿«ä¿®å¤
* å¤§æ¨¡å‹ API è°ƒç”¨å¯èƒ½å› é¢‘æ¬¡é™åˆ¶æŠ¥é”™ï¼Œè¯·é€‚å½“è®¾ç½® `MAX_WORKERS`ï¼ˆå·²æœ‰é»˜è®¤å€¼ï¼‰

> ğŸš« æœ¬é¡¹ç›®ç¦æ­¢ç”¨äºå•†ä¸šç”¨é€”ã€‚å¦‚ä½ ä½¿ç”¨æœ¬é¡¹ç›®ç”Ÿæˆdatasetï¼Œæˆ–è€…ç”¨æ‰€ç”Ÿæˆçš„æ•°æ®è®­ç»ƒ AIï¼Œè¯·æ³¨æ˜åŸä½œè€…ä¿¡æ¯

> **æç¤º**ï¼šæœ¬é¡¹ç›®æ¶‰åŠçš„æ‰€æœ‰å‰§æƒ…æ–‡ä»¶å½’å±æƒå±äº Bushiroadï¼Œæœ¬é¡¹ç›®ä¸æ‹¥æœ‰è¿™äº›å‰§æƒ…å†…å®¹ï¼Œä»…ç”¨äºæŠ€æœ¯ç ”ç©¶ä¸æ•™å­¦ç”¨é€”  
> **é¸£è°¢**ï¼šæ„Ÿè°¢ [bestdori.com](https://bestdori.com/) æä¾›çš„æ•°æ®æ•´ç†æ”¯æŒï¼Œä½†è¯·ä¸è¦æ»¥ç”¨çˆ¬è™«æˆ–å¤§é‡ä½¿ç”¨ä¸‹è½½è„šæœ¬ï¼Œä»¥å…ç»™å…¶æœåŠ¡å™¨é€ æˆä¸å¿…è¦çš„è´Ÿæ‹…  
> **ç‰¹åˆ«é¸£è°¢**ï¼šæ„Ÿè°¢ [ChaRoSaMa](https://github.com/ChaRoSaMa) çš„å¼€æºé¡¹ç›®æä¾›çš„çµæ„Ÿ